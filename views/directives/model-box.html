<div class="model-box-wrapper extended">
	<!-- the gallery -->
	<an-gri-gal ng-if="galleryIsOpen" images="model.images" on-close="openGallery();"></an-gri-gal>
	
	<div class="model-box-color-span" ng-style="{background: getColorNumber(model.color)}">
		<a href="javascript:;" title="Click to change the color" class="choose-color-button" ng-click="showColorsPalette = !showColorsPalette;">
			<i class="glyphicon glyphicon-tint"></i>
		</a>
		
		<a ng-if="showColorsPalette" href="javascript:;" class="color-box color-box-default" ng-click="chooseModelColor();"></a>
		<a ng-if="showColorsPalette" href="javascript:;" class="color-box color-box-magenta" ng-click="chooseModelColor('magenta');"></a>
		<a ng-if="showColorsPalette" href="javascript:;" class="color-box color-box-lightgreen" ng-click="chooseModelColor('lightgreen');"></a>
		<a ng-if="showColorsPalette" href="javascript:;" class="color-box color-box-orange" ng-click="chooseModelColor('orange');"></a>
		<a ng-if="showColorsPalette" href="javascript:;" class="color-box color-box-blue" ng-click="chooseModelColor('blue');"></a>
		<a ng-if="showColorsPalette" href="javascript:;" class="color-box color-box-turquoise" ng-click="chooseModelColor('turquoise');"></a>
	</div>
	
	<!-- display model tags -->
	<div 
		ng-show="model.tags" 
		ng-repeat="modelTag in getModelTags()" 
		class="model-tag" 
		ng-attr-title="{{modelTag}}" 
		ng-style="{'top': ($index * 25 + 30) + 'px'}"
		>{{modelTag}}</div>
	
	<div class="main-image-wrapper">
		
		<!-- the search icon -->
		<a ng-click="openGallery();" class="main-image-lightbox-link" title="Click to see model images in original size">
			<i class="fa fa-search"></i>
		</a>
		<img ng-show=" model.images[0]" ng-src="{{getMediumImage(mainImage)}}">
		<img ng-show="!model.images[0]" ng-src="{{defaultImage}}">
	</div>
	<div class="small-images-wrapper">
		<div class="small-image-wrapper" ng-repeat="i in [0, 1, 2]"
			ng-class="{
				'defined-small-image': model.images[i], 
				'selected-small-image': mainImage == $root.IMAGES_BASE_URL + '/' + model.images[i]
			}">
			<img ng-show=" model.images[i]" ng-src="{{getSmallImage(model.images[i])}}" ng-click="setMainImage(i);">
			<img ng-show="!model.images[i]" ng-src="{{defaultImage}}">
		</div>
	</div>
	<h2 class="model-name"><a ng-href="#/model/{{model.hash}}" ng-attr-title="{{model.name}}">{{model.name}}&nbsp;</a></h2>
	<p class="model-notes" ng-attr-title="{{model.notes}}">{{model.notes}}</p>
	<p class="model-notes model-private-notes" ng-class="{'invisible': !$root.hasRestrictedAccess || !model.private_notes}" ng-attr-title="{{model.private_notes}}">{{model.private_notes}}</p>
	<div class="model-toolbar"><!--  ng-if="hasRestrictedAccess" -->
		<a href="javascript:;" class="btn btn-link pull-right icon-red" 
			ng-if="showDeleteButton"
			ng-click="deleteModel(model.id);" 
			title="Delete the model from the system">
			<i class="glyphicon glyphicon-trash"></i>
		</a>
		
		<a href="#/model/{{model.hash}}" class="btn btn-link pull-right" title="View/Edit model details"><i class="glyphicon glyphicon-pencil"></i></a>
		
		<a href="javascript:;" class="btn btn-link pull-right icon-orange" title="Mark model as stand-by for this date"
			ng-if="showExcludeButton" ng-click="onExclude();"><i class="glyphicon glyphicon-minus-sign"></i></a>
			
		<a href="javascript:;" class="btn btn-link pull-right icon-green" title="Remove model from stand-by list"
			ng-if="showIncludeButton" ng-click="onInclude();"><i class="glyphicon glyphicon-plus-sign"></i></a>
		
		<a href="javascript:;" class="btn btn-link pull-right icon-green" title="Choose model"
			ng-if="showChooseButton" ng-click="onChoose();"><i class="glyphicon glyphicon-ok"></i></a>
		
		<a href="javascript:;" class="btn btn-link pull-right icon-orange" title="Un-Choose model"
			ng-if="showUnChooseButton" ng-click="onUnChoose();"><i class="glyphicon glyphicon-remove"></i></a>
		
		<a href="javascript:;" class="btn btn-link" 
			ng-if="showRelocateButton"
			ng-click="relocateModel(model.id, 'top');" 
			title="Move the model to the top of the list">
			<i class="glyphicon glyphicon-chevron-up"></i>
		</a>
		<a href="javascript:;" class="btn btn-link" 
			ng-if="showRelocateButton" 
			ng-click="relocateModel(model.id, 'bottom');" 
			title="Move the model to the bottom of the list">
			<i class="glyphicon glyphicon-chevron-down"></i>
		</a>
		<a href="javascript:;" class="btn btn-link" 
			ng-if="showMakeAvailableButton" 
			ng-click="onMakeAvailable();" 
			title="Make that model relevant for that date">
			<i class="glyphicon glyphicon-upload"></i>
		</a>
		<a href="javascript:;" class="btn btn-link" 
			ng-if="showMakeUnavailableButton" 
			ng-click="onMakeUnavailable();" 
			title="Make that model NOT relevant for that date">
			<i class="glyphicon glyphicon-download"></i>
		</a>
	</div>
</div>
