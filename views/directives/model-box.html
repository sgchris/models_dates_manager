<div class="model-box-wrapper extended">
	<!-- the gallery -->
	<an-gri-gal ng-if="galleryIsOpen" images="model.images" on-close="openGallery();"></an-gri-gal>
	
	<div class="model-tag">Model #{{model.id}}</div>
	<div class="main-image-wrapper">
		<!-- the category badge -->
		<span class="model-category-name-badge" ng-if="modelCategoryName && showExcludeButton">{{modelCategoryName}}</span>
		
		<!-- the search icon -->
		<a ng-click="openGallery();" class="main-image-lightbox-link" title="Click to see model images in original size">
			<i class="fa fa-search-plus"></i>
		</a>
		<img ng-show=" model.images[0]" ng-src="{{mainImage}}">
		<img ng-show="!model.images[0]" ng-src="{{defaultImage}}">
	</div>
	<div class="small-images-wrapper">
		<div class="small-image-wrapper" ng-repeat="i in [0, 1, 2, 3, 4]"
			ng-class="{
				'defined-small-image': model.images[i], 
				'selected-small-image': mainImage == $root.IMAGES_BASE_URL + '/' + model.images[i]
			}">
			<img ng-show=" model.images[i]" ng-src="{{$root.IMAGES_BASE_URL}}/{{model.images[i]}}" ng-click="setMainImage(i);">
			<img ng-show="!model.images[i]" ng-src="{{defaultImage}}">
		</div>
	</div>
	<h2 class="model-name"><a href="#/model/{{model.hash}}">{{model.name}}</a></h2>
	<p class="model-notes" ng-attr-title="{{model.notes}}">{{model.notes}}</p>
	<p class="model-notes model-private-notes" ng-class="{'invisible': !$root.hasRestrictedAccess || !model.private_notes}" ng-attr-title="{{model.private_notes}}">{{model.private_notes}}</p>
	<div class="model-toolbar"><!--  ng-if="hasRestrictedAccess" -->
		<a href="javascript:;" class="btn btn-link pull-right icon-red" 
			ng-if="showDeleteButton"
			ng-click="deleteModel(model.id);" 
			title="Delete the model from the system">
			<i class="glyphicon glyphicon-trash"></i>
		</a>
		
		<a href="#/model/{{model.hash}}" class="btn btn-link pull-right" title="View/Edit model details"><i class="glyphicon glyphicon-pencil"></i></a>
		
		<a href="javascript:;" class="btn btn-link pull-right icon-orange" title="Exclude model from this date"
			ng-if="showExcludeButton" ng-click="onExclude();"><i class="glyphicon glyphicon-minus-sign"></i></a>
			
		<a href="javascript:;" class="btn btn-link pull-right icon-green" title="Re-include model in this date"
			ng-if="showIncludeButton" ng-click="onInclude();"><i class="glyphicon glyphicon-plus-sign"></i></a>
		
		<a href="javascript:;" class="btn btn-link pull-right icon-green" title="Choose model for this date"
			ng-if="showChooseButton" ng-click="onChoose();"><i class="glyphicon glyphicon-ok"></i></a>
		
		<a href="javascript:;" class="btn btn-link pull-right icon-orange" title="Un-Choose model for this date"
			ng-if="showUnChooseButton" ng-click="onUnChoose();"><i class="glyphicon glyphicon-remove"></i></a>
		
		<a href="javascript:;" class="btn btn-link" 
			ng-if="showRelocateButton"
			ng-click="relocateModel(model.id, 'top');" 
			title="Place the model at the top of the list">
			<i class="glyphicon glyphicon-chevron-up"></i>
		</a>
		<a href="javascript:;" class="btn btn-link" 
			ng-if="showRelocateButton" 
			ng-click="relocateModel(model.id, 'bottom');" 
			title="Place the model at the bottom of the list">
			<i class="glyphicon glyphicon-chevron-down"></i>
		</a>
	</div>
</div>