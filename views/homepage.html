<!-- add login popup -->
<ng-include src="'/views/snippets/login-curtain.html'"></ng-include>

<!-- ng-if="!isMobile" -->
<div class="mobile" ng-if="false">
	<nav class="row" ng-init="selectedMobileTab = 'models';">
		<a href="javascript:;" class="col-xs-6" ng-class="{'selected': selectedMobileTab == 'models'}" ng-click="selectedMobileTab = 'models';">
			<i class="glyphicon glyphicon-user"></i> Models
		</a>
		<a href="javascript:;" class="col-xs-6" ng-class="{'selected': selectedMobileTab == 'dates'}" ng-click="selectedMobileTab = 'dates';">
			<i class="glyphicon glyphicon-calendar"></i> Dates
		</a>
	</nav>
	
	<br />
	<br />
	
	<div ng-if="selectedMobileTab == 'models'">
		<!-- <div class="col-xs-4 "> 
			<div class="thumbnail mobile-model-box" ng-repeat="model in models.data | filterModelsByCategory:tabs.current">
				<a ng-href="#/model/{{model.hash}}" class="mobile-model-box-image-wrapper">
					<img ng-show=" model.images[0]" ng-src="{{IMAGES_BASE_URL}}/{{model.images[0]}}">
					<img ng-show="!model.images[0]" src="images/model_silhouette.png">
				</a>
				
				<div class="caption">
					<h3>{{model.name}}</h3>
					<p>
						<a ng-href="#/model/{{model.hash}}" class="btn btn-primary">Edit</a>
						<a ng-click="models.relocateModel(model.id, 'top')" class="btn btn-default">Up</a>
						<a ng-click="models.relocateModel(model.id, 'bottom')" class="btn btn-default">Down</a>
						<a ng-click="models.deleteModel(model.id)" class="btn btn-danger">Delete</a>
					</p>
				</div>
				
			</div>
		</div> -->
		
		<ul class="mobile-models-list">
			<li ng-repeat="model in models.data | filterModelsByCategory:tabs.current">
				<a ng-href="#/model/{{model.hash}}">
					<div class="mobile-model-image-wrapper">
						<img ng-show=" model.images[0]" ng-src="{{IMAGES_BASE_URL}}/{{model.images[0]}}">
						<img ng-show="!model.images[0]" src="images/model_silhouette.png">
					</div>
					<p class="mobile-model-name">{{model.name}}</p>
				</a>
			</li>
		</ul>
		
	</div>
	
	<div ng-if="selectedMobileTab == 'dates'">
	
		<div class="list-group">
			<a ng-href="#/date/{{date.hash}}" ng-repeat="date in dates.data" class="list-group-item">
				<h4 class="list-group-item-heading">{{ date.date_ts | secondsToMilliseconds | date: 'dd MMM yyyy' }}</h4>
				<p>Chsn: date.chosen_models.length, St-by: {{date.excluded_models.length}}</p>
			</a>
		</div>
		<!--
		<ul class="mobile-models-list">
			<li>
				<a ng-href="#/date/{{date.hash}}">
					{{ date.date_ts | secondsToMilliseconds | date: 'dd MMM yyyy' }}
					<small>Chsn: date.chosen_models.length, St-by: {{date.excluded_models.length}}</small>
				</a>
			</li>
		</ul>
		-->
	</div>
	
	<a ng-click="models._mobile_addNewModel()" class="mobile-button-add-new">
		<i class="glyphicon glyphicon-plus"></i>
	</a>
</div>

<!-- ng-if="!isMobile" -->

<div>
	<a href="javascript:;" class="shrink-expand-sidebar-button" ng-click="sidebar.shrinkExpandHomepageSidebar();" title="Show or hide the task bar">
		<span ng-show=" sidebar.expanded"><i class="glyphicon glyphicon-arrow-left"></i> Shrink</span>
		<span ng-show="!sidebar.expanded"><i class="glyphicon glyphicon-arrow-right"></i> Expand</span>
		Sidebar
	</a>
	<div class="col-xs-12 col-md-3 sidebar-wrapper" 
		ng-show="sidebar.expanded" 
		ng-if="hasRestrictedAccess">
		
		<h4>Add new model</h4>
		
		<form ng-submit="models.addNewModel()">
			<p class="input-group" ng-class="{'has-error': models.newModelError}">
				<input type="text" ng-model="models.newModelName" class="form-control" placeholder="Model full name here (e.g. Kate Upton)" />
				<span class="input-group-btn">
					<button type="submit" class="btn btn-success" ng-click="addNewModel()"><i class="glyphicon glyphicon-plus"></i> Add</button>
				</span>
			</p>
			<p ng-show="models.newModelError" class="alert alert-warning">{{models.newModelError}}</p>
		</form>
		
		<a href="#/models_categories">Manage models categories</a>
		
		<hr />
		
		<h4>Add new date</h4>
		
		<form ng-submit="dates.addNewDate()">
			<p class="input-group" ng-class="{'has-error': dates.newDateError}">
				<input type="text" class="form-control"
					ng-click="dates.newDateOpen = !dates.newDateOpen"
					uib-datepicker-popup="dd MMMM yyyy" 
					ng-model="dates.newDate" 
					is-open="dates.newDateOpen" 
					datepicker-options="dates.newDateOptions" 
					close-text="Close" />
				<span class="input-group-btn">
					<button type="button" class="btn btn-default" ng-click="dates.newDateOpen = !dates.newDateOpen"><i class="glyphicon glyphicon-calendar"></i></button>
				</span>
				<span class="input-group-btn">
					<button type="submit" class="btn btn-success"><i class="glyphicon glyphicon-plus"></i> Add</button>
				</span>
			</p>
			<p ng-show="dates.newDateError" class="alert alert-warning">{{dates.newDateError}}</p>
		</form>
		
		<hr />
		
		<h4>Existing dates</h4>
		<div class="list-group">
			<a ng-href="#/date/{{date.hash}}" class="list-group-item" ng-repeat="date in dates.data">
				<span class="badge alert-info" ng-show="true || date.excluded_models.length > 0" title="{{date.excluded_models.length}} excluded models">{{date.excluded_models.length}}</span>
				{{ date.date_ts | secondsToMilliseconds | date: 'dd MMM yyyy' }}
			</a>
		</div>
	</div>
	
	<div class="col-xs-12" ng-class="{'col-md-9':sidebar.expanded, 'col-md-12':!sidebar.expanded}">
		
		<br ng-if="isMobile" />

		<!-- models categories -->
		<ul class="nav nav-tabs">
			<li role="presentation" ng-repeat="tab in tabs.data" ng-class="{'active': tab.id == tabs.current}">
				<a href="javascript:;" ng-click="tabs.current = tab.id;">{{ tab.name }}</a>
			</li>
		</ul>

		<br />

		<article ng-repeat="model in models.data | filterModelsByCategory:tabs.current">
			<model-box ng-model="model" on-relocate="models.load()" on-delete="models.load()"></model-box>
		</article>
	</div>
</div>


<!-- modal example -->
<!-- 
<script type="text/ng-template" id="modal-content.html">
	<div class="modal-header">
		<h3 class="modal-title">Select Fruit</h3>
	</div>
	<div class="modal-body">
		<span class="btn-group">
			<a ng-repeat="item in items" ng-click="selected.item = item"
			   class="btn {{item == selected.item ? 'btn-primary' : 'btn-default' }}">{{ item }}</a>
		</span>
	</div>
	<div class="modal-footer">
		<button class="btn btn-success" ng-click="ok()">OK</button>
		<button class="btn btn-default" ng-click="cancel()">Cancel</button>
	</div>
</script>
-->